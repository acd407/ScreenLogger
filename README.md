# ScreenLogger - 手机屏幕状态记录与可视化应用

## 项目介绍
ScreenLogger是一款Android应用程序，用于记录和可视化手机屏幕的开关状态。该应用能够实时捕获屏幕的亮起和熄灭事件，并将这些数据以直观的时间线形式展示给用户，帮助用户了解自己的手机使用习惯。

## 功能特点

### 核心功能
- **屏幕状态监控**：实时记录屏幕的开启和关闭时间
- **历史数据存储**：将屏幕状态数据保存到本地数据库
- **时间线可视化**：以图形化方式展示最近的屏幕使用时段
- **数据查询**：查看最近10次使用记录
- **时间显示优化**：清晰显示时间轴上的各个事件点

### UI/UX特性
- **垂直时间轴**：采用直观的垂直布局展示使用时段
- **胶囊状显示**：使用圆角矩形（胶囊形状）区分不同的使用状态
- **差异化颜色**：绿色表示使用时段，灰色表示未使用时段
- **清晰的时间标记**：右侧显示时间标签，配合短横线标记时间点
- **响应式设计**：适配不同屏幕尺寸的设备

## 技术栈

- **开发语言**：Java
- **开发工具**：Android Studio
- **构建工具**：Gradle
- **UI框架**：Android原生UI
- **数据存储**：SQLite数据库
- **后台机制**：Service + BroadcastReceiver

## 安装和运行

### 环境要求
- Android Studio 3.5+ 
- Android SDK 21+ (Android 5.0 Lollipop)
- JDK 8+

### 安装步骤
1. 克隆项目仓库
   ```bash
   git clone https://github.com/acd407/ScreenLogger.git
   ```
2. 使用Android Studio打开项目
3. 同步Gradle依赖
4. 构建并运行项目到Android设备或模拟器

## 项目结构

```
app/src/main/
├── java/com/example/screenlogger/
│   ├── MainActivity.java           # 主界面
│   ├── ScreenStateService.java     # 屏幕状态监控服务
│   ├── ScreenStateReceiver.java    # 屏幕状态广播接收器
│   ├── BootReceiver.java           # 开机自启动接收器
│   ├── DatabaseHelper.java         # 数据库操作类
│   ├── TimelineFragment.java       # 时间线界面
│   └── TimelineView.java           # 自定义时间线视图
├── res/
│   ├── layout/                     # 布局文件
│   ├── values/                     # 字符串、颜色等资源
│   └── drawable/                   # 图像资源
└── AndroidManifest.xml             # 应用清单文件
```

## 主要功能模块

### 1. 屏幕状态监控

通过`ScreenStateService`和`ScreenStateReceiver`实现对屏幕状态的实时监控。当屏幕状态发生变化时（开启或关闭），系统会记录相应的时间并保存到数据库中。

### 2. 数据存储

使用`DatabaseHelper`类管理SQLite数据库，负责创建表结构、插入数据、查询历史记录等操作。数据库中存储了每次屏幕开关的时间戳和状态信息。

### 3. 时间线可视化

- **TimelineFragment**：负责从数据库获取数据并传递给视图层
- **TimelineView**：自定义视图组件，实现垂直时间线的绘制，包括：
  - 使用不同颜色区分使用和未使用时段
  - 绘制胶囊状的时段块
  - 在右侧显示时间标签
  - 处理短时间段的显示优化

### 4. 后台保活机制

应用使用基础的后台服务和广播接收器机制，确保在后台运行时能够继续监控屏幕状态。在Android 13及以上版本中，可以通过前台服务、WorkManager等方式进一步优化保活能力。

## 使用说明

1. 安装并启动应用
2. 应用会自动开始监控屏幕状态
3. 主界面会显示最近一次屏幕开启和关闭的时间
4. 通过底部导航栏切换到"时间线"页面，查看可视化的使用记录
5. 时间线页面展示了最近10次使用记录的图形化表示

## 未来改进方向

1. **增强的保活策略**：针对Android 13+的后台限制进行优化
2. **数据统计与分析**：增加使用时长统计、使用频率分析等功能
3. **导出与分享**：支持将使用记录导出为CSV或图表格式
4. **自定义主题**：允许用户自定义时间线的颜色和样式
5. **通知提醒**：根据用户设置的使用时长发送提醒
6. **多设备同步**：支持通过云服务同步多设备的使用记录

## 开发注意事项

1. 应用需要`RECEIVE_BOOT_COMPLETED`权限以实现开机自启动
2. 在Android 10及以上版本中，后台启动服务受到限制，需要适当调整策略
3. 长时间后台运行可能会增加电池消耗，需要优化资源使用
4. 不同手机厂商可能有特殊的后台管理策略，需要进行适配测试

## License

[MIT License](LICENSE)
